<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur de Proportions - Le Grand Livre du Pain</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .recipe-container { max-width: 600px; margin: 0 auto; }
        .recipe-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white; padding: 20px; border-radius: 12px 12px 0 0;
            text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .recipe-icon { font-size: 2.5em; margin-bottom: 8px; }
        .recipe-title h1 { font-size: 1.5em; font-weight: bold; margin-bottom: 5px; }
        .recipe-subtitle { font-size: 0.85em; opacity: 0.9; margin: 0; }
        .recipe-content {
            background: white; padding: 20px;
            border-radius: 0 0 12px 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .calculator-box {
            background: rgba(255,255,255,0.15); padding: 15px;
            border-radius: 8px; backdrop-filter: blur(10px);
        }
        .form-label { font-weight: bold; font-size: 0.9em; margin-bottom: 5px; }
        .form-select, .form-control {
            padding: 8px; font-size: 0.9em; border-radius: 6px;
            border: 1px solid #ddd; font-weight: bold;
        }
        .result-card {
            display: flex; justify-content: space-between; align-items: center;
            padding: 8px 10px; border-radius: 6px; margin-bottom: 8px;
        }
        .result-label { font-weight: 600; font-size: 0.9em; }
        .result-value { font-weight: bold; font-size: 1em; }
        .info-box {
            padding: 10px; border-radius: 5px; margin-top: 12px; font-size: 0.85em;
        }
        .back-to-top-btn {
            position: fixed; bottom: 20px; right: 20px; background: #764ba2;
            color: white; width: 40px; height: 40px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 20px; text-decoration: none;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3); transition: all 0.3s ease; z-index: 1000;
        }
        .back-to-top-btn:hover {
            background: #667eea; transform: translateY(-5px); color: white;
        }
    </style>
</head>
<body>
    <div id="top"></div>
    <div class="recipe-container">
        <div class="recipe-header">
            <div class="recipe-icon">ðŸ§®</div>
            <div class="recipe-title">
                <h1>Calculateur de Proportions du Boulanger</h1>
                <p class="recipe-subtitle">Calculez automatiquement vos ingrÃ©dients selon les rÃ¨gles de la boulangerie artisanale</p>
            </div>
        </div>
        <div class="recipe-content">
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                <div class="calculator-box">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label" style="color: white;">
                                ðŸŒ¾ Type de Farine:
                            </label>
                            <select id="flourType" onchange="updateWaterInfo()" class="form-select">
                                <option value="0">Farine blanche T55/T65</option>
                                <option value="5">Farine complÃ¨te (+5%)</option>
                                <option value="10">Farine intÃ©grale (+10%)</option>
                                <option value="8">Farine de seigle (+8%)</option>
                                <option value="15">Sans gluten (+15%)</option>
                            </select>
                            <p id="flourInfo" style="margin-top: 5px; font-size: 0.75em; opacity: 0.9; min-height: 30px;"></p>
                        </div>
                        
                        <div class="col-md-6">
                            <label class="form-label" style="color: white;">
                                ðŸ§« Type de Fermentation:
                            </label>
                            <select id="fermentType" onchange="calculate()" class="form-select">
                                <option value="levure">Levure (1.5%)</option>
                                <option value="levain">Levain (30%)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="row mb-2">
                        <div class="col-6">
                            <label class="form-label" style="color: white;">
                                ðŸ“Š Farine (g):
                            </label>
                            <input type="number" id="flourWeight" value="500" min="50" max="10000" step="10" 
                                   oninput="calculateFromFlour()" class="form-control">
                        </div>
                        
                        <div class="col-6">
                            <label class="form-label" style="color: white;">
                                ðŸ’§ Eau (ml):
                            </label>
                            <input type="number" id="waterAmount" value="325" min="50" max="10000" step="5" 
                                   oninput="calculateFromWater()" class="form-control">
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label" style="color: white;">
                            ðŸ’§ Hydratation: <span id="hydrationPercent" style="color: #ffd700;">65%</span>
                        </label>
                        <input type="range" id="hydrationSlider" min="50" max="90" value="65" step="1" 
                               oninput="updateHydration()" class="form-range">
                        <div style="display: flex; justify-content: space-between; font-size: 0.75em; margin-top: 3px;">
                            <span>50%</span>
                            <span>90%</span>
                        </div>
                    </div>
                    
                    <div id="calculationResults" style="background: white; color: #333; padding: 15px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                        <h5 style="color: #667eea; margin-bottom: 12px; text-align: center; border-bottom: 2px solid #667eea; padding-bottom: 8px; font-size: 1em;">
                            ðŸ“‹ RÃ©sultats
                        </h5>
                        
                        <div class="result-card" style="background: #f0f7ff; border-left: 4px solid #667eea;">
                            <span class="result-label">ðŸŒ¾ Farine <span id="flourAdjustNote" style="font-size: 0.8em; color: #666;"></span>:</span>
                            <span id="resultFlour" class="result-value" style="color: #667eea;">500 g</span>
                        </div>
                        
                        <div class="result-card" style="background: #e3f2fd; border-left: 4px solid #2196F3;">
                            <span class="result-label">ðŸ’§ Eau <span id="waterPercent" style="font-size: 0.9em; color: #666;">(65%)</span><span id="waterAdjustNote" style="font-size: 0.8em; color: #666;"></span>:</span>
                            <span id="resultWater" class="result-value" style="color: #2196F3;">325 ml</span>
                        </div>
                        
                        <div class="result-card" style="background: #fff3e0; border-left: 4px solid #FF9800;">
                            <span class="result-label">ðŸ§‚ Sel <span style="font-size: 0.9em; color: #666;">(2%)</span>:</span>
                            <span id="resultSalt" class="result-value" style="color: #FF9800;">10 g</span>
                        </div>
                        
                        <div class="result-card" style="background: #f1f8e9; border-left: 4px solid #8BC34A;">
                            <span class="result-label">ðŸ§« <span id="fermentLabel">Levure sÃ¨che</span> <span id="fermentPercent" style="font-size: 0.9em; color: #666;">(1.5%)</span>:</span>
                            <span id="resultFerment" class="result-value" style="color: #8BC34A;">7.5 g</span>
                        </div>
                        
                        <div id="levainBreakdown" class="info-box" style="background: #f1f8e9; border-left: 4px solid #8BC34A; display: none;">
                            <p style="margin: 0; color: #558B2F; font-weight: bold; font-size: 0.85em;">
                                ðŸ§« <span id="levainBreakdownText"></span>
                            </p>
                        </div>
                        
                        <div class="info-box" style="background: #f0f7ff; border-left: 4px solid #2196F3;">
                            <p style="margin: 0; color: #1565C0; font-weight: bold;">
                                ðŸ’¡ <span id="hydrationInfo">Hydratation standard - Pain classique avec belle mie</span>
                            </p>
                        </div>
                        
                        <div id="flourAdjustmentInfo" class="info-box" style="background: #fff3e0; border-left: 4px solid #FF9800; display: none;">
                            <p style="margin: 0; color: #E65100; font-weight: bold;">
                                ðŸŒ¾ <span id="flourAdjustmentText"></span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <a href="#top" class="back-to-top-btn" title="Retour en haut">â†‘</a>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let isCalculating = false;
        
        const flourTypes = {
            '0': { name: 'Farine blanche', info: 'Hydratation standard - parfaite pour dÃ©buter' },
            '5': { name: 'Farine complÃ¨te', info: 'Contient plus de son, absorbe +5% d\'eau pour texture optimale' },
            '10': { name: 'Farine intÃ©grale', info: 'Grains entiers, nÃ©cessite +10% d\'eau pour Ã©viter sÃ©cheresse' },
            '8': { name: 'Farine de seigle', info: 'Moins de gluten, absorbe +8% d\'eau, texture plus dense' },
            '15': { name: 'Farine sans gluten', info: 'Pas de gluten = besoin de +15% d\'eau pour lier la pÃ¢te' }
        };
        
        function updateWaterInfo() {
            const flourType = document.getElementById('flourType').value;
            const info = flourTypes[flourType];
            document.getElementById('flourInfo').textContent = info.info;
            calculate();
        }
        
        function calculateFromFlour() {
            if (isCalculating) return;
            isCalculating = true;
            
            const flourWeight = parseFloat(document.getElementById('flourWeight').value) || 0;
            const flourTypeAdd = parseFloat(document.getElementById('flourType').value);
            const baseHydration = parseFloat(document.getElementById('hydrationSlider').value);
            const totalHydration = baseHydration + flourTypeAdd;
            
            const waterAmount = Math.round(flourWeight * totalHydration / 100);
            document.getElementById('waterAmount').value = waterAmount;
            
            calculate();
            isCalculating = false;
        }
        
        function calculateFromWater() {
            if (isCalculating) return;
            isCalculating = true;
            
            const waterAmount = parseFloat(document.getElementById('waterAmount').value) || 0;
            const flourTypeAdd = parseFloat(document.getElementById('flourType').value);
            const baseHydration = parseFloat(document.getElementById('hydrationSlider').value);
            const totalHydration = baseHydration + flourTypeAdd;
            
            const flourWeight = Math.round(waterAmount * 100 / totalHydration);
            document.getElementById('flourWeight').value = flourWeight;
            
            calculate();
            isCalculating = false;
        }
        
        function updateHydration() {
            if (isCalculating) return;
            
            const hydration = document.getElementById('hydrationSlider').value;
            document.getElementById('hydrationPercent').textContent = hydration + '%';
            calculateFromFlour();
        }
        
        function calculate() {
            const flourWeight = parseFloat(document.getElementById('flourWeight').value) || 0;
            const waterAmount = parseFloat(document.getElementById('waterAmount').value) || 0;
            const flourTypeAdd = parseFloat(document.getElementById('flourType').value);
            const fermentType = document.getElementById('fermentType').value;
            const baseHydration = parseFloat(document.getElementById('hydrationSlider').value);
            
            if (flourWeight === 0) return;
            
            const salt = Math.round(flourWeight * 2 / 100 * 10) / 10;
            
            let ferment, fermentPercent, fermentLabel;
            let adjustedFlourWeight = flourWeight;
            let adjustedWaterAmount = waterAmount;
            let flourInLevain = 0;
            let waterInLevain = 0;
            
            if (fermentType === 'levure') {
                fermentPercent = 1.5;
                ferment = Math.round(flourWeight * 1.5 / 100 * 10) / 10;
                fermentLabel = 'Levure sÃ¨che';
                document.getElementById('flourAdjustNote').textContent = '';
                document.getElementById('waterAdjustNote').textContent = '';
                document.getElementById('levainBreakdown').style.display = 'none';
            } else {
                fermentPercent = 30;
                ferment = Math.round(flourWeight * 30 / 100);
                fermentLabel = 'Levain actif';
                
                // Le levain contient 50% farine et 50% eau
                flourInLevain = Math.round(ferment / 2);
                waterInLevain = Math.round(ferment / 2);
                
                // Ajuster les quantitÃ©s de farine et d'eau Ã  ajouter
                adjustedFlourWeight = flourWeight - flourInLevain;
                adjustedWaterAmount = waterAmount - waterInLevain;
                
                document.getElementById('flourAdjustNote').textContent = ' (-' + flourInLevain + 'g du levain)';
                document.getElementById('waterAdjustNote').textContent = ' (-' + waterInLevain + 'ml du levain)';
                document.getElementById('levainBreakdown').style.display = 'block';
                document.getElementById('levainBreakdownText').textContent = 
                    'Levain = ' + flourInLevain + 'g farine + ' + waterInLevain + 'g eau';
            }
            
            const actualHydration = Math.round(waterAmount / flourWeight * 100);
            const totalHydration = baseHydration + flourTypeAdd;
            
            document.getElementById('resultFlour').textContent = adjustedFlourWeight + ' g';
            document.getElementById('resultWater').textContent = adjustedWaterAmount + ' ml';
            document.getElementById('waterPercent').textContent = '(' + actualHydration + '%)';
            document.getElementById('resultSalt').textContent = salt + ' g';
            document.getElementById('resultFerment').textContent = ferment + ' g';
            document.getElementById('fermentLabel').textContent = fermentLabel;
            document.getElementById('fermentPercent').textContent = '(' + fermentPercent + '%)';
            
            let hydrationText = '';
            if (actualHydration < 60) {
                hydrationText = 'PÃ¢te ferme - IdÃ©al pour pain de mie, bagels';
            } else if (actualHydration < 65) {
                hydrationText = 'Hydratation standard - Pain classique avec belle mie';
            } else if (actualHydration < 70) {
                hydrationText = 'Bonne hydratation - Baguettes, pains artisanaux';
            } else if (actualHydration < 75) {
                hydrationText = 'Hydratation Ã©levÃ©e - Pain campagne, grosses alvÃ©oles';
            } else if (actualHydration < 80) {
                hydrationText = 'TrÃ¨s hydratÃ©e - Ciabatta, pÃ¢te collante';
            } else {
                hydrationText = 'Hydratation extrÃªme - Focaccia, nÃ©cessite expÃ©rience';
            }
            document.getElementById('hydrationInfo').textContent = hydrationText;
            
            if (flourTypeAdd > 0) {
                const flourTypeName = flourTypes[flourTypeAdd.toString()].name;
                document.getElementById('flourAdjustmentInfo').style.display = 'block';
                document.getElementById('flourAdjustmentText').textContent = 
                    flourTypeName + ': +' + flourTypeAdd + '% d\'eau ajoutÃ©e (' + baseHydration + '% + ' + flourTypeAdd + '% = ' + totalHydration + '%)';
            } else {
                document.getElementById('flourAdjustmentInfo').style.display = 'none';
            }
        }
        
        updateWaterInfo();
        calculate();
        
        const backToTopBtn = document.querySelector('.back-to-top-btn');
        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) { backToTopBtn.style.display = 'flex'; }
            else { backToTopBtn.style.display = 'none'; }
        });
        backToTopBtn.style.display = 'none';
    </script>
</body>
</html>
